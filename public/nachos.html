<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ai-Maize-ing Nachos - Nachos Menu</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Shrikhand&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="api-service.js"></script>

    <!-- Web App Manifest for Mobile -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#8b4513">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-title" content="Ai-Maize-ing Nachos">
    <link rel="touch-icon" href="/icon-192x192.png">
</head>
<body>

<div class="container">
    <header>
        <div class="page-header">
            <button class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h1>Our Nachos Menu</h1>
            <p>Select your favorite nachos below, then click <strong>View Cart</strong> to complete your order.</p>
        </div>
    </header>

    <!-- Header Buttons -->
    <div class="header-buttons">
        <div id="admin-panel">
            <button id="admin-toggle"><i class="fas fa-user-shield"></i> Admin</button>
        </div>
        <div id="customer-panel">
            <button id="customer-toggle">
                <i class="fas fa-user-plus"></i> Create Account
            </button>
        </div>
    </div>
    <!-- Updated Admin Dashboard -->
<div id="admin-dashboard" style="display: none;">
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h2>Admin Dashboard</h2>
            <button class="dashboard-close"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="dashboard-stats">
            <div class="stat-card">
                <h3>Total Orders</h3>
                <div class="stat-value" id="total-orders">0</div>
            </div>
            <div class="stat-card">
                <h3>Total Sales</h3>
                <div class="stat-value" id="total-sales">‚Ç±0</div>
            </div>
            <div class="stat-card">
                <h3>Today's Orders</h3>
                <div class="stat-value" id="today-orders">0</div>
            </div>
            <div class="stat-card">
                <h3>Today's Sales</h3>
                <div class="stat-value" id="today-sales">‚Ç±0</div>
            </div>
        </div>
        
        <!-- Availability Controls Section -->
        <div class="availability-section">
            <h3>üì¶ Item Availability Management</h3>
            <div class="section-content">
                <p>Toggle item availability for customers:</p>
                <div id="availability-controls" class="availability-controls-grid">
                    <p>Loading availability controls...</p>
                </div>
            </div>
        </div>
        
        <div class="dashboard-content">
            <div class="orders-section">
                <h3>Recent Orders</h3>
                <div id="orders-list">
                    <p>Loading orders...</p>
                </div>
            </div>
            
            <div class="sales-section">
                <h3>Sales Overview</h3>
                <div id="sales-chart-container">
                    <canvas id="sales-chart"></canvas>
                </div>
            </div>
        </div>
        
        <div class="dashboard-actions">
            <button onclick="resetAllAvailability()" style="background: #17a2b8;">
                <i class="fas fa-sync"></i> Mark All Items Available
            </button>
            <button onclick="clearCart()" style="background: #6c757d;">
                <i class="fas fa-trash"></i> Clear All Carts
            </button>
        </div>
    </div>
</div>
<!-- Promotional Banner -->
<div class="promo-banner">
  <p>
    <span class="promo-icon">üçÉ</span>
   "Lahat ng pagkain ay sariwa naming inihahanda! Mangyaring mag-order 1 bago ipickup
    <span class="promo-icon">‚è∞</span>
  </p>
</div>
    <section id="menu">
        <div class="menu-grid">

            <div class="menu-item" data-name="Regular Nachos" data-price="35">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="image/classic nachos.jpg" alt="Regular Nachos" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmY2YTAwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSJ3aGl0ZSI+UmVndWxhciBOYWNob3M8L3RleHQ+PC9zdmc+'">
                        </div>
                        <div class="flip-card-back">
                            <p>Ingredients: Chips, beef, cucumber, white onions, tomatoes, carrots, cheesy sauce, garlic sauce, sesame seeds.</p>
                        </div>
                    </div>
                </div>
                <h3>Regular Nachos</h3>
                <p class="price">‚Ç±35</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>

            <div class="menu-item" data-name="Veggie Nachos" data-price="65">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="image/veggie nachos.jpg" alt="Veggie Nachos" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmY2YTAwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSJ3aGl0ZSI+VmVnZ2llIE5hY2hvczwvdGV4dD48L3N2Zz4='">
                        </div>
                        <div class="flip-card-back">
                            <p>Ingredients: Corn chips, bell peppers, onions, olives, melted cheese, guacamole.</p>
                        </div>
                    </div>
                </div>
                <h3>Veggie Nachos</h3>
                <p class="price">‚Ç±65</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>

            <div class="menu-item" data-name="Overload Cheesy Nachos" data-price="95">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="image/overload chees nachos.jpg" alt="Overload Cheesy Nachos" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmY2YTAwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSJ3aGl0ZSI+T3ZlcmxvYWQgQ2hlZXN5IE5hY2hvczwvdGV4dD48L3N2Zz4='">
                        </div>
                        <div class="flip-card-back">
                            <p>Ingredients: Chips, beef, cucumber, white onions, tomatoes, carrots, black olives, cheesy sauce, garlic sauce, sesame seeds, Cheese.</p>
                        </div>
                    </div>
                </div>
                <h3>Overload Cheesy Nachos</h3>
                <p class="price">‚Ç±95</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>

            <div class="menu-item" data-name="Nacho Combo" data-price="75">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="image/combo.png" alt="Nacho Combo" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmY2YTAwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSJ3aGl0ZSI+TmFjaG8gQ29tYm88L3RleHQ+PC9zdmc+'">
                        </div>
                        <div class="flip-card-back">
                            <p>Ingredients: Chips, beef, cucumber, white onions, tomatoes, carrots, cheesy sauce, garlic sauce, sesame seeds, Drinks.</p>
                        </div>
                    </div>
                </div>
                <h3>Nacho Combo</h3>
                <p class="price">‚Ç±75</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>

            <div class="menu-item" data-name="Nacho Fries" data-price="85">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="image/nacho fries.jpg" alt="Nacho Fries" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmY2YTAwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSJ3aGl0ZSI+TmFjaG8gRnJpZXM8L3RleHQ+PC9zdmc+'">
                        </div>
                        <div class="flip-card-back">
                            <p>Ingredients: Fries, Chips, beef, cucumber, white onions, tomatoes, carrots, black olives, cheesy sauce, garlic sauce, sesame seeds.</p>
                        </div>
                    </div>
                </div>
                <h3>Nacho Fries</h3>
                <p class="price">‚Ç±85</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>

            <div class="menu-item" data-name="Supreme Nachos" data-price="180">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="image/Supreme Nachos.png" alt="Supreme Nachos" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmY2YTAwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSJ3aGl0ZSI+U3VwcmVtZSBOYWNob3M8L3RleHQ+PC9zdmc+'">
                        </div>
                        <div class="flip-card-back">
                            <p>Ingredients: Corn chips, beef, tomatoes, onions, triple cheese, guacamole.</p>
                        </div>
                    </div>
                </div>
                <h3>Supreme Nachos</h3>
                <p class="price">‚Ç±180</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>

            <div class="menu-item" data-name="Shawarma fries" data-price="120">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="image/shawarma fries.jpeg" alt="Shawarma Fries" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmY2YTAwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSJ3aGl0ZSI+U2hhd2FybWEgRnJpZXM8L3RleHQ+PC9zdmc+'">
                        </div>
                        <div class="flip-card-back">
                            <p>Ingredients: Fries, beef, cucumber, white onions, tomatoes, carrots, black olives, cheesy sauce, garlic sauce, sesame seeds, cheese, guacamole.</p>
                        </div>
                    </div>
                </div>
                <h3>Shawarma Fries</h3>
                <p class="price">‚Ç±120</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>
        </div>
    </section>

    <!-- Navigation Footer -->
    <div class="page-navigation">
        <button class="nav-btn" onclick="navigateTo('index.html')">
            <i class="fas fa-home"></i> Home
        </button>
        <button class="nav-btn" onclick="navigateTo('aifoodies.html')">
            <i class="fas fa-ice-cream"></i> AI Foodies
        </button>
    </div>
</div>

<!-- Cart Trigger Button -->
<button id="cart-trigger">View Cart (<span id="cart-count">0</span>)</button>

<!-- Cart Popup -->
<div id="cart-popup">
    <div class="cart-header">
        <h3>Your Order</h3>
        <button class="close-btn">X</button>
    </div>
    <ul id="cart-items"></ul>
    <p>Total: <span id="cart-total">‚Ç±0</span></p>

    <div class="order-details">
        <input type="text" id="customer-name" placeholder="Your Name for Pickup">
        <input type="tel" id="customer-phone" placeholder="Phone Number (Optional)">
        <input type="text" id="pickup-time" placeholder="Pick-up Time (e.g., 6:30 PM)">
    </div>

    <div class="payment-options">
        <select id="payment-method">
            <option value="Cash on Pick-up">Cash on Pick-up</option>
            <option value="Gcash">Gcash / PayMaya</option>
            <option value="Bank Transfer">Bank Transfer</option>
        </select>
    </div>

    <button id="checkout-btn">Send Order</button>
</div>

<!-- Modals -->
<div id="custom-alert" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <p id="custom-alert-message"></p>
        <button id="custom-alert-ok">OK</button>
    </div>
</div>

<div id="login-modal" class="modal-overlay" style="display: none;">
    <div class="login-container">
        <h2>Admin Login</h2>
        <input type="text" id="admin-username" placeholder="Username">
        <input type="password" id="admin-password" placeholder="Password">
        <button id="login-btn">Login</button>
    </div>
</div>

<div id="admin-dashboard" style="display: none;">
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h2>Admin Dashboard</h2>
            <button class="dashboard-close"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="dashboard-stats">
            <div class="stat-card">
                <h3>Total Orders</h3>
                <div class="stat-value" id="total-orders">0</div>
            </div>
            <div class="stat-card">
                <h3>Total Sales</h3>
                <div class="stat-value" id="total-sales">‚Ç±0</div>
            </div>
            <div class="stat-card">
                <h3>Today's Orders</h3>
                <div class="stat-value" id="today-orders">0</div>
            </div>
            <div class="stat-card">
                <h3>Today's Sales</h3>
                <div class="stat-value" id="today-sales">‚Ç±0</div>
            </div>
        </div>
        
        <div class="dashboard-content">
            <div class="orders-section">
                <h3>Recent Orders</h3>
                <div id="orders-list">
                    <p>Loading orders...</p>
                </div>
            </div>
            
            <div class="sales-section">
                <h3>Sales Overview</h3>
                <div id="sales-chart-container">
                    <canvas id="sales-chart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="script.js"></script>
<script>
    // Navigation functions
    function navigateTo(page) {
        // Save cart to localStorage before navigating
        localStorage.setItem('globalCart', JSON.stringify(cart));
        window.location.href = page;
    }
    
    function goBack() {
        navigateTo('index.html');
    }
    
    // Initialize page-specific functionality
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üåÆ Nachos page initialized');
        
        // Load cart from localStorage
        const savedCart = localStorage.getItem('globalCart');
        if (savedCart) {
            cart = JSON.parse(savedCart);
            updateCartDisplay();
        }
    });
</script>

<script>
    // Initialize cart from localStorage
    let cart = [];
    const savedCart = localStorage.getItem('globalCart');
    if (savedCart) {
        try {
            cart = JSON.parse(savedCart);
        } catch (e) {
            console.error('Error parsing cart from localStorage:', e);
            cart = [];
        }
    }

    // Update cart display on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateCartDisplay();
        
        // Add event listeners to Add to Cart buttons
        document.querySelectorAll('.add-to-cart-btn').forEach(button => {
            button.addEventListener('click', function() {
                const menuItem = this.closest('.menu-item');
                const itemName = menuItem.getAttribute('data-name');
                const itemPrice = parseInt(menuItem.getAttribute('data-price'));
                addToCart(itemName, itemPrice);
            });
        });
    });

    // Cart functions
    function addToCart(name, price) {
        // Check if item already exists in cart
        const existingItem = cart.find(item => item.name === name);
        
        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cart.push({
                name: name,
                price: price,
                quantity: 1
            });
        }
        
        // Save to localStorage
        localStorage.setItem('globalCart', JSON.stringify(cart));
        
        // Update display
        updateCartDisplay();
        
        // Show confirmation
        showAlert(`${name} added to cart!`);
    }

    function updateCartDisplay() {
        const cartCount = document.getElementById('cart-count');
        const cartItems = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        
        if (cartCount) {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
        }
        
        if (cartItems && cartTotal) {
            // Only update if cart popup elements exist
            let total = 0;
            cartItems.innerHTML = '';
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const li = document.createElement('li');
                li.innerHTML = `
                    ${item.name} x${item.quantity} = ‚Ç±${itemTotal}
                    <button onclick="removeFromCart(${index})" class="remove-item">X</button>
                `;
                cartItems.appendChild(li);
            });
            
            cartTotal.textContent = `‚Ç±${total}`;
        }
    }

    function removeFromCart(index) {
        cart.splice(index, 1);
        localStorage.setItem('globalCart', JSON.stringify(cart));
        updateCartDisplay();
    }

    // Alert function
    function showAlert(message) {
        const alertModal = document.getElementById('custom-alert');
        const alertMessage = document.getElementById('custom-alert-message');
        const alertOk = document.getElementById('custom-alert-ok');
        
        if (alertModal && alertMessage) {
            alertMessage.textContent = message;
            alertModal.style.display = 'flex';
            
            if (alertOk) {
                alertOk.onclick = function() {
                    alertModal.style.display = 'none';
                };
            }
        } else {
            alert(message);
        }
    }
</script>

</body>
</html>